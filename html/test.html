<html>
  <head>
    <title>Testing WebSockets</title>
  </head>
  <body>
    <script>
      if ('WebSocket' in window){
        console.log("WebSockets are supported");
        var connection = new WebSocket('ws://localhost:8080/');
        connection.onopen = function() {
          console.log("WebSocket connection established");
          connection.send("testing");
          connection.send("testing more");
          connection.send("testing even more");
          connection.send("testing a fricking long string that exceeds 125 characters as the websockets protocol behaves differently when you cross this limit. the next threshold is going to require a really long string, though :s");
        }
        connection.onclose = function() {
          console.log("WebSocket connection closed");
        }
        connection.onerror = function() {
          console.log("WebSocket connection error");
        }
      } else {
        console.log("WebSockets are not supported");
      }
    </script>
  </body>
</html>
